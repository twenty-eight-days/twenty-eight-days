(this["webpackJsonptwenty-eight-days"]=this["webpackJsonptwenty-eight-days"]||[]).push([[0],{151:function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return v})),n.d(t,"c",(function(){return h}));var a=function(){return{type:"theme/TOGGLE_THEME"}},r=n(419),c=Object(r.a)({palette:{type:"light"}}),i=Object(r.a)({palette:{type:"dark"}}),o=c,u=n(0),l=n(390),s=n.n(l),d=n(389),f=n.n(d),m=n(733),p=n(100),b=n.n(p)()({root:{display:"grid",gridTemplateColumns:"auto 1fr auto",alignItems:"center"},icon:{margin:4}}),g=function(e){var t=e.theme,n=e.onToggleTheme,a=b(t);return u.createElement("div",{className:a.root},u.createElement(f.a,{className:a.icon}),u.createElement(m.a,{checked:t===i,onChange:n,color:"default"}),u.createElement(s.a,{className:a.icon}))},y=n(40),v=function(){var e=Object(y.useTypedSelector)((function(e){return e.theme})),t=Object(y.useTypedDispatch)();return u.createElement(g,{theme:e,onToggleTheme:function(){return t(a())}})},h=function(e,t){return"theme/TOGGLE_THEME"===t.type?"light"===e.palette.type?i:c:e}},168:function(e,t,n){"use strict";n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u}));var a=n(51),r=new URLSearchParams(window.location.search),c=r.has("signUp"),i=r.get("appId")||Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_NAME:"28 Days",REACT_APP_VERSION:"0.3.0"}).REACT_APP_USERBASE_APP_ID,o=function(){return!c&&i?{authState:{type:"attempt-auto-login",appId:i}}:{authState:{type:"login-form",state:{type:"login-form-idle"}}}},u={authState:{type:"logged-in",user:a.a,dataLoading:"pending"}}},201:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return u}));var a=n(393),r=n.n(a),c=n(208),i=n(111),o=function(e){return{type:c.a,cycles:e}},u=function(e){return function(){var t=new Blob([JSON.stringify(e)],{type:"text/json;charset=utf-8"}),n=Object(i.a)((new Date).valueOf(),"yyyyMMdd");r.a.saveAs(t,"cycle-data-".concat(n,".json"))}}},208:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a="cycle/UPDATE_CYCLES"},218:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a="db/UPDATE_AUTH_STATE"},327:function(e,t){},328:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(170),r=n(36),c=n(208),i=n(226),o=n(107),u=n(625),l=function(e,t){switch(t.type){case c.a:if(t.cycles.length>0){var n=function(e){var t=e[0];return{currentCycle:{id:t.id,startDate:t.startDate,duration:Object(i.a)(Object(o.a)(),t.startDate),type:"current"},pastCycles:e.flatMap((function(e,t,n){if(t>0){var r=n[t-1].startDate,c=e.startDate,o=Math.abs(Object(i.a)(r,c));return[Object(a.a)({},e,{type:"past",duration:o})]}return[]}))}}(Object(r.a)(t.cycles).sort((function(e,t){return Object(u.a)(e.startDate,t.startDate)})));return Object(a.a)({},e,{history:n})}return e;default:return e}}},329:function(e,t){},330:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a={}},372:function(e,t){var n;n||(n={})},376:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(170),r=n(218),c=function(e,t){switch(t.type){case r.a:return Object(a.a)({},e,{authState:t.authState});default:return e}}},377:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(0),r=n(40),c=n(62),i=n(67),o=n(39),u=n(51),l=function(e){var t=e.children,n=Object(r.useTypedSelector)((function(e){return e.database.authState})),l=Object(c.b)();return Object(a.useEffect)((function(){if("attempt-auto-login"===n.type)console.debug("Attempting DB auto-login..."),u.e.init({appId:n.appId}).then((function(e){e.user?(console.debug("DB auto-login successful"),l(Object(o.i)(e.user))):l(Object(o.j)())})).catch((function(e){console.debug("DB init with auto-login failed: "+e),l(Object(o.e)(e))}));else if("logged-in"===n.type&&"pending"===n.dataLoading){var e=Object(o.b)(n);console.log("DB openDatabase ".concat(e," ...")),l(Object(o.d)(n.user)),u.e.openDatabase({databaseName:e,changeHandler:function(e){var t=e.map((function(e){return{id:e.itemId,startDate:e.item}}));l(Object(i.updateCycles)(t)),l(Object(o.c)(n.user))}}).then((function(){console.log("DB openDatabase ".concat(e," successful"))})).catch((function(t){console.log("DB openDatabase ".concat(e," failed ").concat(t)),l(Object(o.c)(n.user))}))}}),[n,l]),t}},378:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a=n(62).c},379:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(62),r=function(){return Object(a.b)()}},381:function(e,t,n){"use strict";n.d(t,"a",(function(){return H}));var a=n(22),r=n(36),c=n(0),i=n.n(c),o=n(227),u=n(79),l=n(153),s=n(158),d=n(699),f=Object(d.a)({userName:{textTransform:"capitalize"}}),m=function(e){var t=e.userName,n=e.currentDay,a=e.median,r=e.lastStartDate,i=f(),d=Object(l.a)(r,a-1).valueOf(),m=Object(s.a)(d,new Date)?c.createElement("b",null,"today"):c.createElement("div",null,"on ",c.createElement("b",null,Object(u.b)(d)));return c.createElement("div",null,c.createElement(o.a,{variant:"body1",align:"center"},"Hey ",c.createElement("span",{className:i.userName},t)," \u2013 today is ",Object(u.b)((new Date).valueOf())),c.createElement(o.a,{variant:"h1",align:"center"},n),c.createElement(o.a,{variant:"body1",align:"center"},"days since your last period, which started on ",Object(u.c)(r),"."),c.createElement("br",null),c.createElement(o.a,{variant:"body1",align:"center"},"Your next period is expected ",m,"."))},p=n(700),b=n(701),g=n(731),y=n(727),v=n(43),h=n(111),E=function(e){return Object(h.a)(e,"dd.MM.yyyy")},O=Object(d.a)((function(e){return{root:{display:"grid",width:"100%",height:"100%",justifyItems:"center"},bar:{fill:Object(v.d)(e.palette.primary.main,.5),strokeWidth:1,stroke:e.palette.background.default},dot:{fill:e.palette.secondary.main},line:{stroke:e.palette.text.primary,strokeWidth:1},text:{fill:e.palette.text.primary,textAnchor:"middle",fontSize:9,dominantBaseline:"central"}}})),j=function(e){var t,n,a,r=e.width,c=e.height,o=e.currentDay,u=e.median,l=e.cycleHistory,s=O(),d=l.pastCycles.map((function(e){return e.duration})),f=null!==(t=Object(p.a)(d))&&void 0!==t?t:20,m=null!==(n=Object(b.a)(d))&&void 0!==n?n:35,v=Object(y.a)().domain([f,m+1]).range([0,r]),h=Object(g.a)().thresholds(v.ticks(m-f))(d),E=Object(y.a)().domain([0,null!==(a=Object(b.a)(h,(function(e){return e.length})))&&void 0!==a?a:0]).nice().range([c-20,10]),j=r/h.length,S=o>=f?h[o-f]:void 0,D=v(u+.5);return i.a.createElement("div",{className:s.root},i.a.createElement("svg",{viewBox:"0 0 ".concat(r," ").concat(c),width:r,height:c},i.a.createElement("line",{className:s.line,x1:D,x2:D,y1:5,y2:c-10-5}),i.a.createElement("text",{className:s.text,x:D,y:c-10},u),h.map((function(e,t){var n=E(0)-E(e.length);return i.a.createElement("rect",{key:"bin-".concat(t),className:s.bar,x:v(e.x0),y:E(e.length),width:j,height:n})})),S&&i.a.createElement("circle",{className:s.dot,cx:v(o+.5),cy:E(S.length)-j/2,r:j/3,strokeWidth:0})))},S=n(395),D=n(93),w=Object(d.a)((function(e){return{root:function(e){return{width:"100%",height:e}},label:{fill:e.palette.text.primary,dominantBaseline:"central",fontSize:9}}})),C=function(e){var t=e.cycleHistory,n=e.median,a=t.pastCycles,c=18*a.length,o=w(c),u=Object(D.a)(),l=[t.currentCycle].concat(Object(r.a)(a)).reverse().map((function(e){return{id:T(e),currentDuration:"current"===e.type?e.duration+1:0,pastDuration:"past"===e.type?e.duration:0}})),s={axis:"x",value:n,lineStyle:{stroke:u.palette.secondary.main,strokeWidth:.5}};return i.a.createElement("div",{className:o.root},i.a.createElement(S.a,{data:l,keys:["currentDuration","pastDuration"],colors:["lavender",Object(v.d)(u.palette.primary.main,.5)],layout:"horizontal",padding:.2,enableGridY:!1,isInteractive:!1,layers:["markers","axes","bars",function(e){var t=e.bars.map((function(e){var t=e.data,n=e.x,a=e.y,r=e.width,c=e.height,u=t.data;return i.a.createElement("text",{className:o.label,key:"".concat(t.id,"/").concat(t.index),x:n,y:a,transform:"translate(".concat(r+-12,",").concat(c/2,")")},"currentDuration"===t.id&&t.index===l.length-1?u.currentDuration:"","pastDuration"===t.id&&t.index<=l.length?u.pastDuration:"")}));return i.a.createElement("g",null,t)}],margin:{top:0,right:0,bottom:0,left:115},label:function(){return""},theme:{fontSize:9,textColor:u.palette.text.primary},markers:[s]}))};function T(e){var t=E(e.startDate);switch(e.type){case"past":var n=E(Object(l.a)(e.startDate,e.duration));return"".concat(t," - ").concat(n);default:return"".concat(t," - __.__.____")}}var _=Object(d.a)((function(e){return{root:{display:"grid",width:"100%",height:"100%",alignItems:"center",justifyItems:"center",gridGap:e.spacing(1)}}})),I=function(e){var t=e.userName,n=e.currentDay,a=e.median,r=e.lastStartDate,i=e.cycleHistory,u=_();return c.createElement("div",{className:u.root},c.createElement(m,{userName:t,currentDay:n,median:a,lastStartDate:r}),c.createElement(A,{text:"Past Cycles"}),c.createElement(o.a,{variant:"body1",align:"center"},"Your ",c.createElement("b",null,"median cycle")," length is ",a," days."),c.createElement(C,{cycleHistory:i,median:a}),c.createElement(A,{text:"Duration Histogram"}),c.createElement(j,{width:200,height:150,currentDay:n,median:a,cycleHistory:i}))},N=Object(d.a)((function(e){return{container:{display:"flex",width:"100%",alignItems:"center",marginTop:12},border:{borderBottom:"2px solid lightgray",width:"100%"},content:{paddingTop:e.spacing(.5),paddingBottom:e.spacing(.5),paddingRight:e.spacing(2),paddingLeft:e.spacing(2),fontWeight:500,fontSize:22,color:"lightgray",whiteSpace:"nowrap"}}})),A=function(e){var t=e.text,n=N();return c.createElement("div",{className:n.container},c.createElement("div",{className:n.border}),c.createElement("span",{className:n.content},t),c.createElement("div",{className:n.border}))},P=n(404),R=n(40),k=n(107),x=n(226),B=Object(d.a)({root:{display:"grid",width:"100%",height:"100%",alignItems:"start",justifyItems:"center"}}),L=function(){var e=B();return c.createElement("div",{className:e.root},c.createElement(o.a,{variant:"body1",align:"center"},"Please add at least two cycle start dates (via ",c.createElement("i",null,"Data")," tab)"))},H=function(){var e=Object(c.useState)(Object(k.a)().valueOf()),t=Object(a.a)(e,2),n=t[0],i=t[1];Object(P.a)((function(){i(Object(k.a)().valueOf())}),6e4);var o=Object(R.useTypedSelector)((function(e){return e.cycle.history})),u=Object(R.useTypedSelector)((function(e){var t=e.database.authState;return"logged-in"===t.type?t.user.username:""}));if(o&&o.pastCycles.length>0){var l=o.currentCycle.startDate,s=function(e){var t=Math.floor(e.length/2),n=Object(r.a)(e).sort((function(e,t){return e-t}));return e.length%2!==0?n[t]:(n[t-1]+n[t])/2}(o.pastCycles.map((function(e){return e.duration}))),d=Object(x.a)(n,l),f=Math.floor(d)+1;return c.createElement(I,{userName:u,currentDay:f,median:s,lastStartDate:l,cycleHistory:o})}return c.createElement(L,null)}},382:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(146),r=n(391),c=n(151),i=n(67),o=n(55),u={database:o.isDemoMode?o.demoDatabaseState:Object(o.defaultDatabaseState)(),theme:c.b,cycle:i.defaultCycleState},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;return{database:Object(o.dbReducer)(e.database,t),theme:Object(c.c)(e.theme,t),cycle:Object(i.cycleReducer)(e.cycle,t)}},s=n(414),d=function(){return Object(a.createStore)(l,Object(r.composeWithDevTools)(Object(a.applyMiddleware)(s.a)))}},383:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var a=n(0),r=n.n(a),c=n(36),i=n(717),o=n(720),u=n(721),l=n(698),s=n(719),d=n(100),f=n.n(d),m=n(408),p=n.n(m),b=n(22),g=n(699),y=n(41),v=n(728),h=n(710),E=n(711),O=n(729),j=n(718),S=n(713),D=n(417),w=n(420),C=n(107),T=Object(g.a)({root:{width:"100%"},content:{display:"grid",gridTemplateColumns:"1fr",width:"100%"},actions:{display:"grid",justifyItems:"end"}}),_=function(e){var t=e.onAdd,n=T(),c=Object(a.useState)(Object(C.a)().valueOf()),i=Object(b.a)(c,2),o=i[0],u=i[1],l=Object(a.useState)(!0),s=Object(b.a)(l,2),d=s[0],f=s[1];return r.a.createElement(h.a,{className:n.root,variant:"outlined"},r.a.createElement(E.a,{className:n.content},r.a.createElement(y.a,{dateAdapter:D.a,locale:w.a},r.a.createElement(v.a,{label:"Cycle Start Date",value:o,onChange:function(e){return e&&u(e.valueOf())},onError:function(e){return f(null===e)},renderInput:function(e){return r.a.createElement(O.a,e)},mask:"__.__.____",disableFuture:!0,showTodayButton:!0,autoOk:!0}))),r.a.createElement(j.a,{className:n.actions},r.a.createElement(S.a,{variant:"contained",color:"primary",disabled:!d,onClick:function(){return t(o)}},"Add")))},I=n(79),N=f()({root:{display:"grid",width:"100%",justifyItems:"center"},list:{width:"100%"}}),A=function(e){var t=e.cycleHistory,n=e.onAdd,a=e.onDelete,d=N(),f=t?[t.currentCycle].concat(Object(c.a)(t.pastCycles)):[];return r.a.createElement("div",{className:d.root},r.a.createElement(_,{onAdd:n}),r.a.createElement(i.a,{className:d.list},f.map((function(e){return r.a.createElement(s.a,{key:e.id},r.a.createElement(o.a,null,Object(I.d)(e.startDate)),r.a.createElement(u.a,null,r.a.createElement(l.a,{edge:"end","aria-label":"delete",onClick:function(){return a(e.id)}},r.a.createElement(p.a,null))))}))))},P=n(40),R=n(62),k=n(55),x=function(e){var t=e.loginState,n=Object(P.useTypedSelector)((function(e){return e.cycle.history})),a=Object(R.b)();return r.a.createElement(A,{cycleHistory:n,onAdd:function(e){return a(Object(k.addStartDate)(e,t))},onDelete:function(e){return a(Object(k.deleteStartDate)(e,t))}})}},384:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n(22),r=n(0),c=n.n(r),i=n(729),o=n(713),u=n(722),l=n(699),s=Object(l.a)((function(e){return{root:{width:"100%",display:"grid",gridTemplateRows:"auto auto auto",gridRowGap:e.spacing(2)},button:{minHeight:48}}})),d=function(e){var t,n,l,d=e.isSignUp,f=e.state,m=e.onSubmit,p=s(),b=Object(r.useState)(null!==(t=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_NAME:"28 Days",REACT_APP_VERSION:"0.3.0"}).REACT_APP_USERBASE_APP_ID)&&void 0!==t?t:""),g=Object(a.a)(b,2),y=g[0],v=g[1],h=Object(r.useState)(null!==(n=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_NAME:"28 Days",REACT_APP_VERSION:"0.3.0"}).REACT_APP_USERBASE_USERNAME)&&void 0!==n?n:""),E=Object(a.a)(h,2),O=E[0],j=E[1],S=Object(r.useState)(null!==(l=Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_NAME:"28 Days",REACT_APP_VERSION:"0.3.0"}).REACT_APP_USERBASE_PASSWORD)&&void 0!==l?l:""),D=Object(a.a)(S,2),w=D[0],C=D[1],T="login-form-submitted"===f.type,_="login-form-error"===f.type&&"credentials"===f.field;return c.a.createElement("form",{className:p.root,noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault(),m(y,O,w)}},c.a.createElement(i.a,{id:"appId",variant:"outlined",fullWidth:!0,label:"App Id",type:"password",value:y,onChange:function(e){return v(e.target.value)},disabled:T,error:"login-form-error"===f.type&&"appId"===f.field}),c.a.createElement(i.a,{id:"username",variant:"outlined",fullWidth:!0,label:"Username",value:O,onChange:function(e){return j(e.target.value)},disabled:T,error:_}),c.a.createElement(i.a,{id:"password",variant:"outlined",fullWidth:!0,label:"Password",type:"password",value:w,onChange:function(e){return C(e.target.value)},disabled:T,error:_}),c.a.createElement(o.a,{className:p.button,disabled:T||0===y.trim().length||0===O.trim().length||0===w.trim().length,type:"submit",variant:"contained",color:"primary"},T?c.a.createElement(u.a,{size:20}):d?"Sign Up":"Log In"))},f=n(62),m=n(39),p=n(51),b=n(168),g=function(e){var t=e.state,n=Object(r.useState)(),i=Object(a.a)(n,2),o=i[0],u=i[1],l=Object(r.useState)(!1),s=Object(a.a)(l,2),g=s[0],y=s[1],v=Object(r.useState)(),h=Object(a.a)(v,2),E=h[0],O=h[1],j=Object(f.b)();return Object(r.useEffect)((function(){o&&!g&&(console.debug("Initializing DB..."),p.e.init({appId:o}).then((function(){console.debug("DB init successful"),y(!0)})).catch((function(e){console.debug("DB init failed: "+e),y(!1),j(Object(m.g)("Invalid App Id","appId"))})))}),[o,g,y,j]),Object(r.useEffect)((function(){if(g&&E){p.e.signOut().catch((function(){}));var e=Object(a.a)(E,2),t=e[0],n=e[1];b.c?Object(p.d)(t,n).then((function(e){return j(e)})):Object(p.c)(t,n).then((function(e){return j(e)}))}}),[g,E,j]),c.a.createElement(d,{isSignUp:b.c,state:t,onSubmit:function(e,t,n){u(e),O([t,n]),j(Object(m.h)())}})}},385:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n(36),r=n(0),c=n(413),i=n.n(c),o=n(698),u=function(e){var t=e.onClick;return r.createElement(o.a,{color:"inherit",onClick:t},r.createElement(i.a,null))},l=n(40),s=n(201),d=n(79),f=function(){var e=Object(l.useTypedSelector)((function(e){return e.cycle})),t=Object(l.useTypedDispatch)();return r.createElement(u,{onClick:function(){var n=function(e){var t=e.history;return{history:{startDates:(t?[t.currentCycle].concat(Object(a.a)(t.pastCycles)):[]).map((function(e){return Object(d.d)(e.startDate)}))}}}(e);t(Object(s.a)(n))}})}},39:function(e,t,n){"use strict";n.d(t,"e",(function(){return s})),n.d(t,"j",(function(){return d})),n.d(t,"h",(function(){return f})),n.d(t,"g",(function(){return m})),n.d(t,"i",(function(){return p})),n.d(t,"d",(function(){return b})),n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return v})),n.d(t,"f",(function(){return h}));var a=n(3),r=n.n(a),c=n(7),i=n(218),o=n(51),u=function(e){return{type:i.a,authState:e}},l=function(e){return u({type:"login-form",state:e})},s=function(e){return u({type:"db-init-failed",error:e})},d=function(){return l({type:"login-form-idle"})},f=function(){return l({type:"login-form-submitted"})},m=function(e,t){return l({type:"login-form-error",field:t,error:e})},p=function(e){return u({type:"logged-in",user:e,dataLoading:"pending"})},b=function(e){return u({type:"logged-in",user:e,dataLoading:"in-progress"})},g=function(e){return u({type:"logged-in",user:e,dataLoading:"done"})},y=function(e){return"".concat(e.user.username,"-cycles-v1")},v=function(e,t){return Object(c.a)(r.a.mark((function n(){var a;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=y(t),n.abrupt("return",o.e.insertItem({databaseName:a,itemId:"".concat(e),item:e}).then((function(){return console.log("DB insertItem successful")})).catch((function(e){console.error("DB insertItem failed "+e)})));case 2:case"end":return n.stop()}}),n)})))},h=function(e,t){return Object(c.a)(r.a.mark((function n(){var a;return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=y(t),n.abrupt("return",o.e.deleteItem({databaseName:a,itemId:e}).then((function(){return console.log("DB deleteItem successful")})).catch((function(e){console.error("DB deleteItem failed "+e)})));case 2:case"end":return n.stop()}}),n)})))}},40:function(e,t,n){"use strict";var a=n(327);n.o(a,"configureStore")&&n.d(t,"configureStore",(function(){return a.configureStore})),n.o(a,"useTypedDispatch")&&n.d(t,"useTypedDispatch",(function(){return a.useTypedDispatch})),n.o(a,"useTypedSelector")&&n.d(t,"useTypedSelector",(function(){return a.useTypedSelector}));var r=n(382);n.d(t,"configureStore",(function(){return r.a}));var c=n(378);n.d(t,"useTypedSelector",(function(){return c.a}));var i=n(379);n.d(t,"useTypedDispatch",(function(){return i.a}))},452:function(e,t,n){e.exports=n(621)},51:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return b})),n.d(t,"e",(function(){return h})),n.d(t,"c",(function(){return E})),n.d(t,"d",(function(){return O}));var a=n(36),r=n(6),c=n(37),i=n(418),o=n(278),u=n(226),l=n(107),s=n(153),d=n(79),f=n(39),m={username:"demo-User",userId:"demo-user-id",authToken:"demo-authToken",creationDate:new Date,paymentsMode:"test"},p=function(){function e(t){Object(r.a)(this,e),this.changeHandler=void 0,this.items=[],this.items=t}return Object(c.a)(e,[{key:"init",value:function(){return Promise.resolve({})}},{key:"signUp",value:function(){return Promise.resolve(m)}},{key:"signIn",value:function(){return Promise.resolve(m)}},{key:"signOut",value:function(){return Promise.resolve()}},{key:"openDatabase",value:function(e){return this.changeHandler=e.changeHandler,this.changeHandler(Object(a.a)(this.items)),Promise.resolve()}},{key:"insertItem",value:function(e){if(this.items.find((function(t){return t.itemId===e.itemId})))return Promise.resolve();var t,n=[].concat(Object(a.a)(this.items),[{itemId:null!==(t=e.itemId)&&void 0!==t?t:e.item.toString(),item:e.item}]);return this.changeHandler&&this.changeHandler(n),this.items=n,Promise.resolve()}},{key:"deleteItem",value:function(e){var t=this.items.filter((function(t){return t.itemId!==e.itemId}));return this.changeHandler&&this.changeHandler(t),this.items=t,Promise.resolve()}}]),e}(),b=new URLSearchParams(window.location.search).has("demo"),g=function(e){return Object(o.a)(e,d.a,new Date).valueOf()},y=g("13.01.2021"),v=Object(u.a)(Object(l.a)(),y),h=b?new p(["05.01.2021","01.12.2020","12.11.2020","09.10.2020","07.09.2020","10.08.2020","11.07.2020","11.06.2020","05.05.2020","06.04.2020","01.03.2020","10.02.2020","15.01.2020","18.12.2019","20.11.2019","22.10.2019"].map((function(e){var t=g(e);return Object(s.a)(t,v).valueOf()})).sort((function(e,t){return t-e})).map((function(e){return{itemId:"".concat(e),item:e}}))):i.a,E=function(e,t){return console.debug("DB sign-in..."),h.signIn({username:e,password:t}).then((function(e){return console.debug("DB sign-in successful"),Object(f.i)(e)})).catch((function(e){return console.debug("DB sign-in failed: "+e),e.toString().startsWith("AppIdNotValid")?Object(f.g)("Invalid App Id","appId"):Object(f.g)("Invalid Credentials","credentials")}))},O=function(e,t){return console.debug("DB sign-up..."),h.signUp({username:e,password:t}).then((function(e){return console.debug("DB sign-up successful"),Object(f.i)(e)})).catch((function(e){return console.debug("DB sign-up failed: "+e),e.toString().startsWith("AppIdNotValid")?Object(f.g)("Invalid App Id","appId"):Object(f.g)("Invalid Credentials","credentials")}))}},55:function(e,t,n){"use strict";var a=n(372);n.o(a,"DataProvider")&&n.d(t,"DataProvider",(function(){return a.DataProvider})),n.o(a,"LoginForm")&&n.d(t,"LoginForm",(function(){return a.LoginForm})),n.o(a,"addStartDate")&&n.d(t,"addStartDate",(function(){return a.addStartDate})),n.o(a,"dbReducer")&&n.d(t,"dbReducer",(function(){return a.dbReducer})),n.o(a,"defaultDatabaseState")&&n.d(t,"defaultDatabaseState",(function(){return a.defaultDatabaseState})),n.o(a,"deleteStartDate")&&n.d(t,"deleteStartDate",(function(){return a.deleteStartDate})),n.o(a,"demoDatabaseState")&&n.d(t,"demoDatabaseState",(function(){return a.demoDatabaseState}));var r=n(168);n.d(t,"defaultDatabaseState",(function(){return r.a})),n.d(t,"demoDatabaseState",(function(){return r.b}));var c=n(39);n.d(t,"addStartDate",(function(){return c.a})),n.d(t,"deleteStartDate",(function(){return c.f}));var i=n(376);n.d(t,"dbReducer",(function(){return i.a}));var o=n(377);n.d(t,"DataProvider",(function(){return o.a}));var u=n(384);n.d(t,"LoginForm",(function(){return u.a}));var l=n(51);n.d(t,"isDemoMode",(function(){return l.b}))},614:function(e,t){},616:function(e,t){},621:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(30),i=n.n(c),o=n(169),u=n(725),l=n(712),s=n(151),d=n(100),f=n.n(d),m=n(67),p=n(227),b=n(22),g=n(55),y=n(724),v=n(415),h=n.n(v),E=n(416),O=n.n(E),j=n(723),S=n(722),D=n(699),w=Object(D.a)((function(e){return{root:{display:"grid",width:"100%",justifyItems:"center",marginTop:e.spacing(1),gridRowGap:e.spacing(2)}}})),C=function(e){var t=e.label,n=w();return r.a.createElement("div",{className:n.root},r.a.createElement(S.a,{size:100}),r.a.createElement(p.a,{variant:"body1",align:"center"},t))},T=f()({bottomNav:{width:"100vw",position:"fixed",bottom:0,left:0},progress:{justifySelf:"center"}}),_=function(e){var t=e.authState,n=T(),c=Object(a.useState)("stats"),i=Object(b.a)(c,2),o=i[0],u=i[1];switch(t.type){case"attempt-auto-login":return r.a.createElement(C,{label:"Signing in"});case"login-form":return r.a.createElement(g.LoginForm,{state:t.state});case"logged-in":return"done"!==t.dataLoading?r.a.createElement(C,{label:"Loading data"}):r.a.createElement("div",null,"stats"===o&&r.a.createElement(m.CycleStats,null),"data"===o&&r.a.createElement(m.CycleData,{loginState:t}),r.a.createElement(j.a,{className:n.bottomNav,value:o,onChange:function(e,t){u(t)},showLabels:!0},r.a.createElement(y.a,{label:"Stats",icon:r.a.createElement(h.a,null),value:"stats"}),r.a.createElement(y.a,{label:"Data",icon:r.a.createElement(O.a,null),value:"data"})));default:return r.a.createElement("div",null)}},I=n(40),N=function(){var e=Object(I.useTypedSelector)((function(e){return e.database.authState}));return r.a.createElement(_,{authState:e})},A=f()((function(e){return{appBar:{height:64},toolbar:{display:"grid",gridTemplateColumns:"auto auto"},toolbarLeft:{height:"100%",marginRight:"auto",display:"grid",gridTemplateColumns:"auto auto",alignItems:"center"},toolbarCenter:Object(o.a)({position:"absolute",width:"100%",display:"grid",pointerEvents:"none"},e.breakpoints.down("sm"),{visibility:"hidden"}),title:{justifySelf:"center",color:e.palette.primary.contrastText},toolbarRight:{height:"100%",marginLeft:"auto",display:"grid",gridTemplateColumns:"auto",alignItems:"center"},main:Object(o.a)({display:"grid",width:"100vw",gridTemplateRows:"auto 1fr auto",gridRowGap:8,paddingTop:100,paddingBottom:100,paddingLeft:"20vw",paddingRight:"20vw"},e.breakpoints.down("sm"),{paddingLeft:"5vw",paddingRight:"5vw"}),bottomNav:{width:"100vw",position:"fixed",bottom:0}}})),P=function(){var e=A();return r.a.createElement("div",{className:"App"},r.a.createElement(u.a,{className:e.appBar},r.a.createElement(l.a,{className:e.toolbar},r.a.createElement("div",{className:e.toolbarLeft},r.a.createElement(m.ExportCycleData,null)),r.a.createElement("div",{className:e.toolbarCenter},r.a.createElement(p.a,{className:e.title,variant:"h6"},"".concat("28 Days"," v").concat("0.3.0"))),r.a.createElement("div",{className:e.toolbarRight},r.a.createElement(s.a,null)))),r.a.createElement("div",{className:e.main},r.a.createElement(N,null)))},R=n(697),k=n(726),x=function(){var e=Object(I.useTypedSelector)((function(e){return e.theme}));return a.createElement(R.a,{theme:e},a.createElement(k.a,null),a.createElement(P,null))},B=n(62),L=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function H(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var W=Object(I.configureStore)(),M=function(){return r.a.createElement(B.a,{store:W},r.a.createElement(g.DataProvider,null,r.a.createElement(x,null)))};i.a.render(r.a.createElement(M,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");L?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):H(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):H(t,e)}))}}()},67:function(e,t,n){"use strict";var a=n(201);n.d(t,"updateCycles",(function(){return a.b}));var r=n(328);n.d(t,"cycleReducer",(function(){return r.a}));var c=n(329);n.o(c,"CycleData")&&n.d(t,"CycleData",(function(){return c.CycleData})),n.o(c,"CycleStats")&&n.d(t,"CycleStats",(function(){return c.CycleStats})),n.o(c,"ExportCycleData")&&n.d(t,"ExportCycleData",(function(){return c.ExportCycleData})),n.o(c,"defaultCycleState")&&n.d(t,"defaultCycleState",(function(){return c.defaultCycleState}));var i=n(330);n.d(t,"defaultCycleState",(function(){return i.a}));var o=n(381);n.d(t,"CycleStats",(function(){return o.a}));var u=n(383);n.d(t,"CycleData",(function(){return u.a}));var l=n(385);n.d(t,"ExportCycleData",(function(){return l.a}))},79:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l}));var a=n(111),r=n(103),c="dd.MM.yyyy",i=function(e){return Object(a.a)(e,c)},o={locale:r.a},u=function(e){return Object(a.a)(e,"EEEE, MMMM dd",o)},l=function(e){return Object(a.a)(e,"MMMM dd",o)}}},[[452,1,2]]]);
//# sourceMappingURL=main.27ae5fca.chunk.js.map